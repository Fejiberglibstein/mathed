\documentclass[12pt, letterpaper]{article}

\usepackage{graphicx} % Required for inserting images
\usepackage{amsmath} % Math package

\usepackage{geometry} % For changing document size

\usepackage{mathrsfs}  % For cursive L

\title{Iteration of Functions}
\author{Emeryllium, LooserRIP, Fejiberglibstein}
\date{February 2024}

\input{macros} % import macros to use

\begin{document}

\maketitle

\begin{abstract}
    Defining unambiguous notation for and finding iterators of certain functions.
\end{abstract}

\tableofcontents
\newpage

\section{Introduction}
- Functions can be \textit{Iterated} by plugging them into themselves. For example, $f(x)$ iterated 2 times is $f\big(f(x)\big)$. 
\\
- An \textit{Iteration} of a function is derived from iterating the original function a certain number of times.
\\
- The \textit{Iterator} of a function gives the $n$th Iteration of the original function given some value $n$.


\section{Notation}

\subsection{$\iterator{}$ notation}
In L notation, Iterators are notated as
    \footnote{Iterators can be notated with or without brackets around the function. Standard procedure is to use brackets if the expression contains multiple terms. If no $n$ value is written, assume $n=2$.}

$$ \iterator{n} \, f(x) \, lx$$
where $n$ is the number of times to iterate, $f(x)$ is the original function, and $lx$ is the variable with respect to which you iterate. For example, $\iterator{n} [2x+b] lx$
iterates with respect to $x$, not $b$, so the iteration $\iterator{3} [2x+b] lx$ would evaluate to $8x+7b$.

\subsubsection{Solutions}
The solution of an Iteration at a specific $x$ value is written using an evaluation bar. Ex:
$$\iterator{5}[x^2-5]lx\bigg|_{x=0}$$
The solutions of an Iterator at a specific $x$ value but variable $n$ value are also written using an evaluation bar.
$$\iterator{n}[x^2-\frac{1}{2}]lx\bigg|_{x=0}$$

\subsubsection{At infinity}
An $n$ value of $\pm\infty$ is allowed and may even result in a finite solution. Ex:
$$\iterator{\infty} [\frac{1}{2}x - 1] lx = -2$$

\subsection{Shorthand}
For the sake of brevity in this paper, Iterators of the function $f(x)$ may be notated as
$$f(x)[n]$$ 
where $n$ is the number of iterations. For example, $f(x)[3]$ evaluates to $f(f(f(x)))$. $f(x)$ can be replaced with an expression if the expression contains only one variable. Ex:
$$(2x-1)[3] = 8x-7$$

\subsection{Preexisting notations}
Some notations for iterating a function already exist, such as $f^n(x)$. However, these are often ambiguous or lacking in some other way.

\section{Rules of iteration}

\subsection{0th Iteration Rule}
The 0th iteration of a function $f(x)$ always evaluates to $x$.
$$\iterator{0}f(x)lx = x$$

\subsection{Identity Rule}
For the identity function $f(x) = x$, 
\[
\iterator{n} \, x \, lx = x
\]
This is known as the identity rule.

\subsection{Inverse Rule}
The $-n$th Iteration of a function $f(x)$ will be equal to the $n$th iteration of the function's inverse.
\footnote{A negative Iteration of a function is only defined for values within the function's range. Ex:$$\iterator{-1} \, floor(x) \, lx = \text{undefined when $x$ is not an integer}$$}
Ex:
\[
\iterator{-n} \, \tan(x) \, lx = \iterator{n} \, \arctan(x) \, lx
\]
\newpage
\section{Trivial generalizations}
Any function composed of one or two adjacent hyperoperations\footnote{See https://en.wikipedia.org/wiki/Hyperoperation.} (Ex. Addition and Multiplication) can be solved trivially.

\subsection{$x$}
In the identity function \(f(x) = x\), every iteration of \(x\) is \(x\). 
\\
Therefore
$$\iterator{} \, x \, lx = x$$
This is known as the \textit{Identity rule}.

\subsection{$x+k$}
The generalization of the function $f(x) = x+k$ is also trivial.
\begin{align*}
    f(x)[1] &= x + k             &= x + 1k \\
    f(x)[2] &= (x + k) + k       &= x + 2k \\
    f(x)[3] &= ((x + k) + k) + k &= x + 3k \\
       \dots \\
    f(x)[n] &= x + \sum_{i=0}^n k  &= x + nk \\
\end{align*}
The pattern $f(x)[n] = x + nk$ can easily be observed. Therefore,
$$\iterator{n} \, (x+k) \, lx = x+nk$$
\\

\subsection{$bx+k$}
Generalizing {$f(x) = bx+k$} is as follows.
\begin{align*}
    f(x)[1] &= bx + k             &= xb^{1}+kb^{0} \\
    f(x)[2] &= b(bx + k) + k       &= xb^{2}+kb^{1}+kb^{0} \\
    f(x)[3] &= b(b(bx + k) + k) + k &= xb^{3} + kb^{2} + kb^{1} + kb^{0} \\
       \dots \\
    f(x)[n] &= xb^{n}+\sum_{r=0}^{n-1} kb^{r}  &= \frac{k(b^{n}-1)}{b-1}+b^{n}x
\end{align*}
\\
The pattern $f(x)[n]$ can be observed and generalized, therefore
$$\iterator{n} [bx+k] lx = \frac{k(b^{n}-1)}{b-1}+b^{n}x$$

\subsection{$bx^k$}
Generalizing {$f(x) = bx^{k}$} is as follows.
\begin{align*}
    f(x)[1] &= bx^{k}             &= b^{1}x^{k} \\
    f(x)[2] &= b(bx^{k}) ^{k}       &= b^{k+1}x^{k^{2}} \\
    f(x)[3] &= b(b(bx^{k})^{k})^{k} &= b^{k^{2} + k + 1} x^{k^{3}} \\
       \dots \\
    f(x)[n] &= b^{\displaystyle \sum_{r=0}^{n-1} k^{r}} x^{k^{n}}  &= b^{\frac{k^{n}-1}{k-1}}x^{k^{n}}
\end{align*}
\\The pattern can be observed and generalized to
$$\iterator{n} [bx^k] lx = b^{\frac{k^{n}-1}{k-1}}x^{k^{n}}$$

\subsection{$(bx)^k$}
Generalizing {$f(x) = (bx)^{k}$} is quite similar to {$f(x) = bx^k$}
\begin{align*}
    f(x)[1] &= (bx)^{k}             &= b^{k}x^{k} \\
    f(x)[2] &= (b(bx)^{k})^{k}       &= b^{k^{2}+k}x^{k^{2}} \\
    f(x)[3] &= (b(b(bx)^{k})^{k})^{k} &= b^{k^{3} + k^{2} + k} x^{k^{3}} \\
       \dots \\
    f(x)[n] &= b^{\sum_{r=1}^{n} k^{r}} x^{k^{n}}  &= b^{\frac{k(k^{n}-1)}{k-1}}x^{k^{n}}
\end{align*}
\\The pattern can be observed and generalized to
$$\iterator{n} [(bx)^k] lx = b^{\frac{k(k^{n}-1)}{k-1}}x^{k^{n}}$$

\newpage
\section{Non-trivial generalizations}

\subsection{$\frac{1}{x+b}$}
\begin{equation}
    \begin{split}
        \iterator{1} \frac{1}{x+b} lx & = \frac{1}{x+b}\\
        \iterator{2} \frac{1}{x+b} lx & = \frac{x+b}{1+bx+b^2}\\
        \iterator{3} \frac{1}{x+b} lx & = \frac{1+bx+b^2}{x+2b+b^2x+b^3}\\
        \iterator{4} \frac{1}{x+b} lx & = \frac{x+2b+b^2x+b^3}{1+2bx+3b^2+b^3x+b^4}\\
        \dots
    \end{split}
\end{equation}
By observation, the numerator of $\iterator{n} \frac{1}{x+b} lx$ is the same as the denominator of $\iterator{n-1} \frac{1}{x+b} lx$. Given this,
$$\iterator{n} \frac{1}{x+b} lx = \frac{G_{n-1}(x)}{G_n(x)}$$
Where
\begin{equation}
    \begin{split}
        G_0(x) & = 1\\
        G_1(x) & = x+b\\
        G_2(x) & = 1+bx+b^2\\
        G_3(x) & = x+2b+b^2x+b^3\\
        G_4(x) & = 1+2bx+3b^2+b^3x+b^4\\
        G_5(x) & = x+3b+3b^2x+4b^3+b^4x+b^5\\
        \dots 
    \end{split}
\end{equation}
$G_n(x)$ can be broken into an odd and even function (for odd and even values of $n$, respectively). In the odd function, $x$ is present in even numbered terms. In the even function, $x$ is present in odd numbered terms. In both functions, $b^t$, where $t$ is the term index, is present on all terms. The constant coefficient of each term follows the formula 
$$\binom{\frac{1}{2}n+\frac{1}{2}t}{t}$$
where $\binom{p_1}{p_2}$ is the binomial function\footnote{https://en.wikipedia.org/wiki/Binomial\_distribution}, $n$ is the iteration number, and $t$ is the term index. $G_n(x)$ for odd values of $n$ is defined as
$$G_n(x) = x\sum^\frac{n}{2}_{t=0}b^{2i}\binom{\frac{n-1}{2}+i}{2i}+\sum^\frac{n}{2}_{i=0}b^{2i+1}\binom{\frac{n+1}{2}+i}{2i+1}$$
$G_n(x)$ for even values of $n$ is defined as
$$G_n(x) = x\sum^\frac{n}{2}_{t=1}b^{2i-1}\binom{\frac{n-2}{2}+i}{2i-1}+\sum^\frac{n}{2}_{t=0}b^{2i}\binom{\frac{n}{2}+i}{2i}$$
Using $\iterator{n} \frac{1}{x+b} lx = \frac{G_{n-1}(x)}{G_n(x)}$, it is possible to define two different functions for odd and even values of $n$.
\begin{equation}
    \begin{split}
        &\text{let } u = b+\sqrt{b^2+4}\\
        \\
        &\text{for even values of }n\text{,}\\
        \iterator{n}\frac{1}{x+b}lx & = 2u\frac{u^{2n-1}(2x+u)-2^{2n-1}(2-xu)}{u^{2n+1}(2x+u)+2^{2n+1}(2-xu)}\\
        \\
        &\text{for odd values of }n\text{,}\\
        \iterator{n}\frac{1}{x+b}lx & = 2u\frac{u^{2n-1}(2x+u)+2^{2n-1}(2-xu)}{u^{2n+1}(2x+u)-2^{2n+1}(2-xu)}\\
    \end{split}
\end{equation}

\subsection{$x + \frac{1}{x}$}
\begin{equation}
    \begin{split}
        f(x)[1] & = \  \frac{x^2+x^{0}}{x^{1}}\\
        f(x)[2] & = \  \frac{x^{4} + 3 x^{2} + x^{0}}{x^{3} + 1x^{1}}\\
        f(x)[3] & = \  \frac{1x^{8}+7x^{6}+13x^{4}+7x^{2}+1x^{0}}{x^{7}+4x^{5}+4x^{3}+ 1x^{1}}\\
    \end{split}
\end{equation}

This is currently *not* generalized, though we do have some information on it.

\section{Other interesting generalizations}

\subsection{Oscillators}
\subsubsection{$\sqrt{k^2-x^2}$}
The iterator for $\iterator{n} \, \sqrt{k^2-x^2} \, lx$ will oscillate between $\sqrt{k^2-x^2}$ on odd values of n and $\sqrt{x^2}$ on even values of n. The proof for this is as follows:
\paragraph{}
Assume that the domain of $f(x)$ is limited to $(-k, k)$
\begin{align*}
        f(x) &= \sqrt{k^2 - x^2} \\
        f(f(x)) &= \sqrt{k^2 - \Big( \sqrt{k^2-x^2} \Big)^2} \\
                &= \sqrt{k^2 - (k^2-x^2) } \quad | -k < x < k \\
                &= \sqrt{x^2} \quad | -k < x < k \\
        f(f(f(x))) &= \sqrt{k^2 - (\sqrt{x^2})^2} \quad | -k < x < k \\
                   &= \sqrt{k^2 - x^2} \quad | -k < x < k \\ 
\end{align*}
Since the domain of $f(x)$ was initially limited to $(-k, k)$, then the domains match. Therefore, $f(x) = f(f(f(x)))$.


\end{document}